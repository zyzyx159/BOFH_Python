<html>
            <head>
            <title> EPISODE 18 - BOFH: Lost licences</title>
            </head>
            <body>
            <h1>BOFH: Lost licences </h1> 
            <h2>Now, if we all just work together... </h2>
            <h3>EPISODE 18 </h3>
            <br /><p></p><p>"I've lost some documents!" the Head of IT gasps, bounding into Mission Control with beads of sweat dotting his puffy red brow.</p><p>"Documents?" the PFY asks.</p><p>"Yes, I scanned our licence agreements into the computer and now they're gone!"</p><p>"Gone from your computer?" the PFY sighs, firing up the backup software.</p><p>"No, no, I put them into the content management system."</p><p>"Ah," the PFY sighs. "So they're gone alright."</p><p>"But I only put them in last week!"</p><p>"Uh-huh."</p><p>"It sent me an email telling me they'd been added to the system!"</p><p>"Yep."</p><p>"There was a link to the documents!!"</p><p>"Mmmmm."</p><p>"I TESTED IT!!"</p><p>"Course you did - and it worked the first time around didn't it?"</p><p>"Yes."</p><p>"And maybe you checked, a day later, just to be certain?"</p><p>"I did - and they were there! But they're not now!"</p><p>"No, they wouldn't be would they?"</p><p>"WHY NOT!?" he snarls.</p><p>"Because we bought a budget content management system. The one based around a relational database that the developers designed themselves."</p><p>"I..."</p><p>"The one we repeatedly told the company not to buy a couple of years back," I chip in.</p><p>"Yes, but it was..."</p><p>"The one that the developers abandoned development on six months later because we were the only UK customer to buy it."</p><p>"They weren't to know th..." the Head pleads.</p><p>"The one with the referential integrity of an Alzheimer's patient meaning a document will be there one day, gone the next and back - briefly - at some indeterminate time in the future?" the PFY says, really labouring the point now.</p><p>"Yes, yes, well it's done now, so how do we recover the data?"</p><p>"Recover?"</p><p>"Get it back into the content management system."</p><p>"It's already back," the PFY says. "It's in there somewhere, just the database indexing is corrupt."</p><p>"So can you uncorrupt it?"</p><p>"You mean do an index rebuild?"</p><p>"Yes," the Head sighs, seeing a happy ending.</p><p>"Sure - though there's only a small chance we'll get your docs back in the index but a large chance that we'll lose other documents from the index."</p><p>"How? Why?"</p><p>"Ok," I say, going to the whiteboard in lecture mode. "The database >scribble< >squeak< will rebuild indexes which are corrupt. The indexes got corrupt >scribble< >scribble< somehow, which means there's every chance that there's duplicates >squeak< >squeak< in the database - which in turn means that when you rebuild the indexes one of the dups will disappear >scribble<. Alternatively, because the integrity's so bad, we could delete >scribble< documents that the database can index in the hopes that when you rebuild the indexes >squeak< >squeak< the missing licence documents will reappear."</p><p>"We need those licenses back, so do what you have to!" the Head snaps.</p><p>"Which licences were they exactly?" the PFY asks.</p><p>"All of them."</p><p>"All... uh even the ones in the document safe!?" the PFY gasps.</p><p>"Yes - especially those."</p><p>"Our site licenses... for... everything?!"</p><p>"Yes, but if you get them back you ca..."</p><p>"You destroyed the originals didn't you?" I sigh.</p><p>"Of course. What's the point in scanning them if you're going to keep the documents?"</p><p>"What was the point in scanning them in the first place?"</p><p>"We needed space in the document vault for some new contracts."</p><p>"So you destroyed licence documents - some of which are proof-of-purchase, some of which are one-time licences and will not be reissued by the vendor."</p><p>"But as you say, they're still in the content management system somewhere. Can't you just do a search on the content management server and find them?"</p><p>"Don't be silly - no content management server allows that - or you'd be able to change systems to some cheaper vendor. No, a proper content management system makes it next to impossible to extract your content in any automated manner so that you're forced to use their product and pay their licence fees no matter how crap it is."</p><p>"But you said this wasn't a proper system."</p><p>"No, we said that this was a budget system - so it's worse. In their wisdom the designers adopted a file system model and split the files into 128K chunks with a pointer to the first chunk and a linked list thereafter. Once you lose the first pointer, it's gone - unless of course you rebuild the database and the right pointer wins."</p><p>"So we should delete some documents from the system?"</p><p>"In theory we should delete all the documents from the system to free up pointers then rebuild the indexes which should retrieve all the missing documents. But it'd take ages to do that..."</p><p>"Not if we work together," the Head gasps. "But - how do we get the existing documents back?"</p><p>"When we've rebuilt the index we extract all the recovered data files. Then we just recover the content management system from backups and reinsert the documents into it, safely."</p><p>"Right," the Head says, dashing off to get deleting.</p><p>"So when do we tell him that there's no index rebuild function?" the PFY asks.</p><p>"AFTER I ring that company that gives you Â£50 for dobbing in companies who pirate software..." I reply, picking up the Yellow Pages.</p><p>"But that would be after I discover that the backup utility on the content management system has been silently failing for months...All of which would be a week or so before we tell him that the licences were only colour photocopies of the originals in the tape safes..."</p><p>"It's a plan!" the PFY chirps.</p>
            Written by: Simon Travaglia
            <br> Posted to: <a href="https://www.theregister.com/2007/05/25/bofh_episode_18/"> https://www.theregister.com/2007/05/25/bofh_episode_18/</a> </br>
            Posted on: Friday, May 25, 2007 at 11:02 UTC
            </body> </html>